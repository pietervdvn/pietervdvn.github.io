{"version":3,"sources":["assets/themes/grb_import/grb.json"],"names":["module","exports","id","title","nl","shortDescription","description","en","language","maintainer","icon","version","startLat","startLon","startZoom","widenFactor","socialImage","clustering","maxZoom","overrideAll","minzoom","layers","builtin","override","location","render","iconSize","tagRenderings","calculatedTags","mapRendering","passAllFeatures","name","source","osmTags","maxCacheAge","width","mappings","if","then","color","or","freeform","key","question","de","and","type","filter","options","fill","condition","geoJson","geoJsonZoomLevel","mercatorCrs","isShown","label","hideFromOverview","defaultBackgroundId","overpassMaxZoom","osmApiTileSize"],"mappings":"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","file":"grb.js","sourceRoot":"..","sourcesContent":["module.exports={id:\"grb\",title:{nl:\"GRB import helper\"},shortDescription:{nl:\"Grb import helper tool\"},description:{nl:\"Dit thema helpt het GRB importeren.\",en:\"This theme is an attempt to help automating the GRB import.\"},language:[\"nl\",\"en\",\"de\"],maintainer:\"\",icon:\"./assets/themes/grb_import/housenumber_blank.svg\",version:\"0\",startLat:51.0249,startLon:4.026489,startZoom:9,widenFactor:2,socialImage:\"\",clustering:{maxZoom:15},overrideAll:{minzoom:19},layers:[{builtin:\"current_view\",override:{\"+mapRendering\":[{location:[\"point\"],icon:{render:\"./assets/svg/robot.svg\"},iconSize:\"15,15,center\"}],tagRenderings:[{id:\"hw\",render:\"Beep boop! I'm a bot!\"}]}},{builtin:\"type_node\",override:{calculatedTags:[\"_is_part_of_building=feat.get('parent_ways')?.some(p => p.building !== undefined && p.building !== '') ?? false\",\"_is_part_of_grb_building=feat.get('parent_ways')?.some(p => p['source:geometry:ref'] !== undefined) ?? false\",\"_is_part_of_building_passage=feat.get('parent_ways')?.some(p => p.tunnel === 'building_passage') ?? false\",\"_is_part_of_highway=!feat.get('is_part_of_building_passage') && (feat.get('parent_ways')?.some(p => p.highway !== undefined && p.highway !== '') ?? false)\",\"_is_part_of_landuse=feat.get('parent_ways')?.some(p => (p.landuse !== undefined && p.landuse !== '') || (p.natural !== undefined && p.natural !== '')) ?? false\",\"_moveable=feat.get('_is_part_of_building') && !feat.get('_is_part_of_grb_building')\"],mapRendering:[{icon:\"square:#cc0\",iconSize:\"5,5,center\",location:[\"point\"]}],passAllFeatures:!0}},{id:\"osm-buildings\",name:\"All OSM-buildings\",source:{osmTags:\"building~*\",maxCacheAge:0},calculatedTags:[\"_surface:strict:=feat.get('_surface')\"],mapRendering:[{width:{render:\"2\",mappings:[{if:\"fixme~*\",then:\"5\"}]},color:{render:\"#00c\",mappings:[{if:\"fixme~*\",then:\"#ff00ff\"},{if:\"building=house\",then:\"#a00\"},{if:\"building=shed\",then:\"#563e02\"},{if:{or:[\"building=garage\",\"building=garages\"]},then:\"#f9bfbb\"},{if:\"building=yes\",then:\"#0774f2\"}]}}],title:\"OSM-gebouw\",tagRenderings:[{id:\"building type\",freeform:{key:\"building\"},render:\"The building type is <b>{building}</b>\",question:{en:\"What kind of building is this?\",de:\"Was ist das für ein Gebäude?\"},mappings:[{if:\"building=house\",then:\"A normal house\"},{if:\"building=detached\",then:\"A house detached from other building\"},{if:\"building=semidetached_house\",then:\"A house sharing only one wall with another house\"},{if:\"building=apartments\",then:\"An apartment building - highrise for living\"},{if:\"building=office\",then:\"An office building - highrise for work\"},{if:\"building=apartments\",then:\"An apartment building\"},{if:\"building=shed\",then:\"A small shed, e.g. in a garden\"},{if:\"building=garage\",then:\"A single garage to park a car\"},{if:\"building=garages\",then:\"A building containing only garages; typically they are all identical\"},{if:\"building=yes\",then:\"A building - no specification\"}]},{id:\"grb-housenumber\",render:{nl:\"Het huisnummer is <b>{addr:housenumber}</b>\"},question:{nl:\"Wat is het huisnummer?\"},freeform:{key:\"addr:housenumber\"},mappings:[{if:{and:[\"not:addr:housenumber=yes\",\"addr:housenumber=\"]},then:{nl:\"Geen huisnummer\"}}]},{id:\"grb-unit\",question:\"Wat is de wooneenheid-aanduiding?\",render:{nl:\"De wooneenheid-aanduiding is <b>{addr:unit}</b> \"},freeform:{key:\"addr:unit\"},mappings:[{if:\"addr:unit=\",then:\"Geen wooneenheid-nummer\"}]},{id:\"grb-street\",render:{nl:\"De straat is <b>{addr:street}</b>\"},freeform:{key:\"addr:street\"},question:{nl:\"Wat is de straat?\"}},{id:\"grb-fixme\",render:{nl:\"De fixme is <b>{fixme}</b>\"},question:{nl:\"Wat zegt de fixme?\"},freeform:{key:\"fixme\"},mappings:[{if:{and:[\"fixme=\"]},then:{nl:\"Geen fixme\"}}]},{id:\"grb-min-level\",render:{nl:\"Dit gebouw begint maar op de {building:min_level} verdieping\"},question:{nl:\"Hoeveel verdiepingen ontbreken?\"},freeform:{key:\"building:min_level\",type:\"pnat\"}},\"all_tags\"],filter:[{id:\"has-fixme\",options:[{osmTags:\"fixme~*\",question:\"Heeft een FIXME\"}]}]},{id:\"service_ways\",name:\"Service roads\",description:\"A seperate layer with service roads, as to remove them from the intersection testing\",source:{osmTags:\"highway=service\"},mapRendering:[{width:4,color:\"#888888\"}],title:{render:\"Service road\"},tagRenderings:[]},{id:\"generic_osm_object\",name:\"All OSM Objects\",source:{osmTags:{and:[\"id~*\",\"place=\",\"disused:power=\",\"power=\",\"type!=boundary\",\"boundary=\",{or:[\"level=\",\"level=0\"]},{or:[\"layer=0\",\"layer=\"]}]},maxCacheAge:0},mapRendering:[{color:{render:\"#ccc\"},width:{render:\"1\"},fill:\"no\"}],title:{render:{\"*\":\"Other OSM-Object\"}},tagRenderings:[\"all_tags\"]},\"address\",{builtin:\"crab_address\",override:{\"calculatedTags+\":[\"_embedded_in=feat.overlapWith('osm-buildings').filter(b => /* Do not match newly created objects */ b.feat.properties.id.indexOf('-') < 0)[0]?.feat?.properties ?? {}\",\"_embedding_nr=feat.get('_embedded_in')['addr:housenumber']+(feat.get('_embedded_in')['addr:unit'] ?? '')\",\"_embedding_street=feat.get('_embedded_in')['addr:street']\",\"_embedding_id=feat.get('_embedded_in').id\",\"_closeby_addresses=feat.closestn('address',10,undefined,50).map(f => f.feat).filter(addr => addr.properties['addr:street'] == feat.properties['STRAATNM'] && feat.properties['HNRLABEL'] == addr.properties['addr:housenumber'] + (addr.properties['addr:unit']??'') ).length\",\"_has_identical_closeby_address=feat.get('_closeby_addresses') >= 1 ? 'yes' : 'no'\",\"_embedded_in_grb=feat.overlapWith('grb')[0]?.feat?.properties ?? {}\",\"_embedding_nr_grb=feat.get('_embedded_in_grb')['addr:housenumber']\",\"_embedding_street_grb=feat.get('_embedded_in_grb')['addr:street']\"],filter:[{id:\"show_matched_addresses\",options:[{question:\"Show all CRAB-addresses (including already matched ones)\"},{question:\"Only show unmatched addresses\",osmTags:{and:[\"_has_identical_closeby_address!=yes\",{\"#\":\"Matches the embedding OSM object\",or:[\"_embedding_nr!:={HUISNR}\",\"_embedding_street!:={STRAATNM}\"]},{\"#\":\"Matches the embedding GRB object\",or:[\"_embedding_nr_grb!:={HUISNR}\",\"_embedding_street_grb!:={STRAATNM}\"]}]}}]}],\"tagRenderings+\":[{id:\"render_embedded\",render:\"Dit CRAB-adres ligt in <a href='https://osm.org/{_embedding_id}' target='_blank'>OSM-gebouw {_embedding_id}</a>\"},{id:\"embedded_address\",render:\"Het omliggende OSM-gebouw heeft geen volledig address\",mappings:[{if:{and:[\"_embedding_street~*\",\"_embedding_nr~*\"]},then:\"Het omliggende object met addres heeft <b>{_embedding_street}</b> {_embedding_nr}\"}],condition:\"_embedding_id~*\"},{id:\"apply-button\",render:\"{tag_apply(addr:street=$STRAATNM; addr:housenumber=$_HNRLABEL,Apply this address on the OSM-building,,_embedding_id)}\",condition:{and:[\"_embedding_id!=\",{or:[\"_embedding_street!:={STRAATNM}\",\"_embedding_nr!:={_HNRLABEL}\"]}]}},{id:\"import-button\",render:\"{import_button(address, addr:street=$STRAATNM; addr:housenumber=$_HNRLABEL,Voeg dit adres als een nieuw adrespunt toe,,osm-buildings,5)}\",condition:{and:[\"_embedding_id!=\",{or:[\"_embedding_street!:={STRAATNM}\",\"_embedding_nr!:={_HNRLABEL}\"]}]}}]}},{id:\"grb\",description:\"Geometry which comes from GRB with tools to import them\",source:{osmTags:{and:[\"HUISNR~*\",\"man_made!=mast\"]},geoJson:\"https://betadata.grbosm.site/grb?bbox={x_min},{y_min},{x_max},{y_max}\",geoJsonZoomLevel:18,mercatorCrs:!0,maxCacheAge:0},name:\"GRB geometries\",title:\"GRB outline\",calculatedTags:[\"_overlaps_with_buildings=feat.overlapWith('osm-buildings').filter(f => f.feat.properties.id.indexOf('-') < 0)\",\"_overlaps_with=feat.get('_overlaps_with_buildings').filter(f => f.overlap > 1 /* square meter */ )[0] ?? ''\",\"_osm_obj:source:ref=feat.get('_overlaps_with')?.feat?.properties['source:geometry:ref']\",\"_osm_obj:id=feat.get('_overlaps_with')?.feat?.properties?.id\",\"_osm_obj:source:date=feat.get('_overlaps_with')?.feat?.properties['source:geometry:date'].replace(/\\\\//g, '-')\",\"_osm_obj:building=feat.get('_overlaps_with')?.feat?.properties?.building\",\"_osm_obj:addr:street=(feat.get('_overlaps_with')?.feat?.properties ?? {})['addr:street']\",\"_osm_obj:addr:housenumber=(feat.get('_overlaps_with')?.feat?.properties ?? {})['addr:housenumber']\",\"_osm_obj:surface=(feat.get('_overlaps_with')?.feat?.properties ?? {})['_surface:strict']\",\"_overlap_absolute=feat.get('_overlaps_with')?.overlap\",\"_reverse_overlap_percentage=Math.round(100 * feat.get('_overlap_absolute') / feat.get('_surface'))\",\"_overlap_percentage=Math.round(100 * feat.get('_overlap_absolute') / feat.get('_osm_obj:surface'))\",\"_grb_ref=feat.properties['source:geometry:entity'] + '/' + feat.properties['source:geometry:oidn']\",\"_imported_osm_object_found= feat.properties['_osm_obj:source:ref'] == feat.properties._grb_ref\",\"_grb_date=feat.properties['source:geometry:date'].replace(/\\\\//g,'-')\",\"_imported_osm_still_fresh= feat.properties['_osm_obj:source:date'] == feat.properties._grb_date\",\"_target_building_type=feat.properties['_osm_obj:building'] === 'yes' ? feat.properties.building : (feat.properties['_osm_obj:building'] ?? feat.properties.building)\",\"_building:min_level= feat.properties['fixme']?.startsWith('verdieping, correct the building tag, add building:level and building:min_level before upload in JOSM!') ? '1' : ''\",\"_intersects_with_other_features=feat.intersectionsWith('generic_osm_object').map(f => \\\"<a href='https://osm.org/\\\"+f.feat.properties.id+\\\"' target='_blank'>\\\" + f.feat.properties.id + \\\"</a>\\\").join(', ')\"],tagRenderings:[{id:\"Import-button\",render:\"{import_way_button(osm-buildings,building=$building;man_made=$man_made; source:geometry:date=$_grb_date; source:geometry:ref=$_grb_ref; addr:street=$addr:street; addr:housenumber=$addr:housenumber; building:min_level=$_building:min_level, Upload this building to OpenStreetMap,,_is_part_of_building=true,1,_moveable=true)}\",mappings:[{\"#\":\"Actually the same as below, except that the text shows 'add the address' too\",if:{and:[\"_overlap_percentage>50\",\"_reverse_overlap_percentage>50\",\"_overlaps_with!=\",\"_osm_obj:addr:street=\",\"_osm_obj:addr:housenumber=\",\"addr:street~*\",\"addr:housenumber~*\",\"addr:street!:={_osm_obj:addr:street}\",\"addr:housenumber!:={_osm_obj:addr:housenumber}\"]},then:\"{conflate_button(osm-buildings,building=$_target_building_type; source:geometry:date=$_grb_date; source:geometry:ref=$_grb_ref; addr:street=$addr:street; addr:housenumber=$addr:housenumber, Replace the geometry in OpenStreetMap and add the address,,_osm_obj:id)}\"},{if:{and:[\"_overlap_percentage>50\",\"_reverse_overlap_percentage>50\",\"_overlaps_with!=\"]},then:\"{conflate_button(osm-buildings,building=$_target_building_type; source:geometry:date=$_grb_date; source:geometry:ref=$_grb_ref, Replace the geometry in OpenStreetMap,,_osm_obj:id)}\"}]},{id:\"Building info\",render:\"This is a <b>{building}</b> <span class='subtle'>detected by {detection_method}</span>\"},{id:\"overlapping building address\",render:\"The overlapping openstreetmap-building has no address information at all\",mappings:[{if:{and:[\"_osm_obj:addr:street~*\",\"_osm_obj:addr:housenumber~*\"]},then:\"The overlapping openstreetmap-building has address {_osm_obj:addr:street} {_osm_obj:addr:housenumber}\"},{if:\"_osm_obj:addr:street~*\",then:\"The overlapping building only has a street known: {_osm_obj:addr:street}\"},{if:\"_osm_obj:addr:housenumber~*\",then:\"The overlapping building only has a housenumber known: {_osm_obj:addr:housenumber}\"},{if:\"_osm_obj:id=\",then:\"No overlapping OpenStreetMap-building found\"}]},{id:\"grb_address_diff\",render:\"<div>The overlapping openstreetmap-building has a different address then this GRB-object: {addr:street} {addr:housenumber}<br/>{tag_apply(addr:street=$addr:street; addr:housenumber=$addr:housenumber,Copy the GRB-address onto the OSM-object,,_osm_obj:id)}\",condition:{and:[\"_osm_obj:id~*\",\"addr:street~*\",\"addr:housenumber~*\",{or:[\"addr:street~*\",\"addr:housenumber~*\"]},{or:[\"addr:street!:={_osm_obj:addr:street}\",\"addr:housenumber!:={_osm_obj:addr:housenumber}\"]}]}},{id:\"overlapping building type\",render:\"<div>The overlapping <a href='https://osm.org/{_osm_obj:id}' target='_blank'>openstreetmap-building</a> is a <b>{_osm_obj:building}</b> and covers <b>{_overlap_percentage}%</b> of the GRB building.<br/>The GRB-building covers <b>{_reverse_overlap_percentage}%</b> of the OSM building<div><h3>GRB geometry:</h3>{minimap(21, id):height:10rem;border-radius:1rem;overflow:hidden}<h3>OSM geometry:</h3>{minimap(21,_osm_obj:id):height:10rem;border-radius:1rem;overflow:hidden}\",condition:\"_overlaps_with!=\"},{id:\"apply-id\",render:\"{tag_apply(source:geometry:date=$_grb_date; source:geometry:ref=$_grb_ref,Mark the OSM-building as imported,,_osm_obj:id)}\",condition:{and:[\"_overlaps_with!=\",\"_imported!=yes\"]}},{id:\"apply-building-type\",render:\"{tag_apply(building=$building,Use the building type from GRB,,_osm_obj:id)}\",condition:{and:[\"_overlaps_with!=\",\"_osm_obj:building=yes\",\"building!=yes\"]}}],isShown:{render:\"yes\",mappings:[{if:{and:[\"_imported_osm_object_found=true\",\"_imported_osm_still_fresh=true\"]},then:\"no\"}]},mapRendering:[{label:{render:\"<div style='margin-top: -42px; color: black' class='rounded-full p-1 font-bold relative'>{addr:housenumber}</div>\",condition:\"addr:housenumber~*\"},iconSize:\"50,50,center\",icon:{render:\"./assets/themes/grb_import/housenumber_blank.svg\",mappings:[{if:\"_intersects_with_other_features~*\",then:\"./assets/themes/grb_import/warning.svg\"},{if:\"addr:housenumber=\",then:\"\"}]},location:[\"point\",\"centroid\"]},{width:{render:5,mappings:[{if:\"_imported=yes\",then:\"1\"}]},color:{render:\"#00a\",mappings:[{if:\"_imported=yes\",then:\"#00ff00\"},{if:{and:[\"_imported_osm_object_found=true\",\"_imported_osm_still_fresh=true\"]},then:\"#0f0\"}]}}]}],hideFromOverview:!0,defaultBackgroundId:\"AGIVFlandersGRB\",overpassMaxZoom:15,osmApiTileSize:17};"]}